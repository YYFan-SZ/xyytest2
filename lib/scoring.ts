export function calculateScore(answers: number[]): number {
  const sum = answers.reduce((acc, curr) => acc + curr, 0)
  const maxScore = answers.length * 5
  return (sum / maxScore) * 100
}

export function getAssessmentType(score: number): string {
  if (score < 20) return "极低型"
  if (score < 40) return "低型"
  if (score < 60) return "平衡型"
  if (score < 80) return "开放型"
  return "强度型"
}

interface AssessmentDetails {
  type: string
  badge: string
  icon: string
  title: string
  subtitle: string
  description: string
  detailedDescription: string
  characteristics: string[]
  suggestions: string[]
}

export function getAssessmentDetails(type: string): AssessmentDetails {
  const details: Record<string, AssessmentDetails> = {
    极低型: {
      type: "极低型",
      badge: "非常开放",
      icon: "🌾",
      title: "极度开放探索者",
      subtitle: "您的性态度极度开放",
      description:
        "您的性态度极度开放，对性相关话题持有非常积极和开放的态度。您在性方面几乎没有压抑感，能够自由地表达和探索自己的需求。这种态度有助于建立健康的亲密关系，但也需要注意在不同场合保持适当的界限。",
      detailedDescription:
        '您是"极度开放探索者"。您对性持有非常积极和开放的态度，在性的各个方面都表现出极高的接受度和探索欲。您能够自如地讨论性话题，毫无顾忌地表达自己的需求和欲望。这种开放的态度使您在亲密关系中能够充分享受性带来的愉悦，如果能够在不同场合保持适当的界限，将会更加完善。',
      characteristics: [
        "对性话题持开放和积极的态度",
        "性生活对您来说比较重要",
        "常愿意在亲密关系中有所探索",
        "对性到角色相对平等的观点",
        "重视性生活的质量和满意度",
      ],
      suggestions: [
        "确保您的开放态度建立在尊重和同意的基础上",
        "出于性沟通能够促进健康的关系",
        "如果需要家庭关系，迫使探索新的体验方式",
        "尊重探索对的新的表达方式",
        "参与试试不同的沟通方式",
      ],
    },
    低型: {
      type: "低型",
      badge: "较为开放",
      icon: "🌾",
      title: "开放探索者",
      subtitle: "您的性态度较为开放",
      description:
        "您的性态度较为开放，对性相关话题持有比较积极的态度。您在性方面的压抑程度较低，能够相对自由地表达自己的需求。您能够在适当的场合讨论性话题，并且在亲密关系中表现出一定的主动性。",
      detailedDescription:
        '您是"开放探索者"。您对性持有比较积极和开放的态度，在大多数情况下能够自如地处理性相关话题。您在亲密关系中能够表达自己的需求，并且愿意与伴侣进行沟通。这种相对开放的态度有助于建立健康的性关系，继续保持这种积极的态度将使您受益。',
      detailedDescription:
        '您是"开放探索者"。您对性持有比较积极和开放的态度，在大多数情况下能够自如地处理性相关话题。您在亲密关系中能够表达自己的需求，并且愿意与伴侣进行沟通。这种相对开放的态度有助于建立健康的性关系，继续保持这种积极的态度将使您受益。',
      characteristics: [
        "对性话题相对开放和积极的态度",
        "性生活对您来说比较重要",
        "常愿意在亲密关系中有所探索",
        "对性到角色相对平等的观点",
        "重视性生活的质量和满意度",
      ],
      suggestions: [
        "确保您的开放态度建立在尊重和同意的基础上",
        "出于性沟通能够促进健康的关系",
        "如果需要家庭关系，迫使探索新的体验方式",
        "尊重探索对的新的表达方式",
        "参与试试不同的沟通方式",
      ],
    },
    平衡型: {
      type: "平衡型",
      badge: "中等舒适",
      icon: "🌾",
      title: "平衡探索者",
      subtitle: "您的性态度处于平衡状态",
      description:
        "您的性态度处于平衡状态，既不过分压抑也不过分开放。您在性方面保持着适度的态度，能够在合适的场合讨论性话题，但也会保持一定的界限。您能够在亲密关系中表达自己的需求，同时也尊重他人的感受。",
      detailedDescription:
        '您是"平衡探索者"。您对性持有平衡的态度，在性的各个方面都表现出适度的接受度。您能够在适当的场合讨论性话题，在亲密关系中也能够表达自己的需求。这种平衡的态度使您既能够享受性带来的愉悦，又能够保持适当的界限。如果能够继续保持这种平衡，将会使您的生活更加和谐。',
      characteristics: [
        "对性话题相对开放但也保持适度的态度",
        "性生活对您来说比较重要",
        "常愿意在亲密关系中有所探索",
        "对性到角色相对平等的观点",
        "重视性生活的质量和满意度",
      ],
      suggestions: [
        "确保您的开放态度建立在尊重和同意的基础上",
        "出于性沟通能够促进健康的关系",
        "如果需要家庭关系，迫使探索新的体验方式",
        "尊重探索对的新的表达方式",
        "参与试试不同的沟通方式",
      ],
    },
    开放型: {
      type: "开放型",
      badge: "开放型",
      icon: "🌾",
      title: "开放探索者",
      subtitle: "您的性态度比较开放",
      description:
        "您的性态度比较开放，对性相关话题持有积极的态度。您在性方面的压抑程度较低，能够相对自由地表达自己的需求。您能够在适当的场合讨论性话题，并且在亲密关系中表现出一定的主动性。",
      detailedDescription:
        '您是"开放探索者"。您对性持有比较积极和开放的态度，在大多数情况下能够自如地处理性相关话题。您在亲密关系中能够表达自己的需求，并且愿意与伴侣进行沟通。这种相对开放的态度有助于建立健康的性关系，继续保持这种积极的态度将使您受益。',
      characteristics: [
        "对性话题相对开放和积极的态度",
        "性生活对您来说比较重要",
        "常愿意在亲密关系中有所探索",
        "对性到角色相对平等的观点",
        "重视性生活的质量和满意度",
      ],
      suggestions: [
        "确保您的开放态度建立在尊重和同意的基础上",
        "出于性沟通能够促进健康的关系",
        "如果需要家庭关系，迫使探索新的体验方式",
        "尊重探索对的新的表达方式",
        "参与试试不同的沟通方式",
      ],
    },
    强度型: {
      type: "强度型",
      badge: "高度压抑",
      icon: "🌾",
      title: "强度压抑型",
      subtitle: "您的性态度存在较高程度的压抑",
      description:
        "您的性态度存在较高程度的压抑，对性相关话题感到不适或尴尬。您在性方面可能受到文化、宗教或个人经历的影响，导致难以自由地表达和探索自己的需求。这种压抑可能会影响您的亲密关系和个人幸福感。",
      detailedDescription:
        '您是"强度压抑型"。您对性持有较为保守和压抑的态度，在性的各个方面都表现出较高的抗拒和不适感。您可能很难讨论性话题，在亲密关系中也难以表达自己的需求。这种压抑可能源于文化、宗教或个人经历的影响。如果这种压抑影响了您的生活质量，建议寻求专业帮助。',
      characteristics: [
        "对性话题感到不适或尴尬",
        "很难与伴侣讨论性方面的需求",
        "认为性是私密话题不应公开讨论",
        "在性行为中很难放松和享受",
        "对自己的身体感到羞耻或不满意",
      ],
      suggestions: [
        "尝试接受性是人类自然需求的观念",
        "寻求专业心理咨询帮助",
        "阅读相关书籍了解健康的性观念",
        "与信任的人分享您的感受",
        "逐步尝试在安全环境中讨论性话题",
      ],
    },
  }

  return details[type] || details["平衡型"]
}
