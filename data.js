// 测试问题数据
const questions = [
    "我认为性是生活中非常重要的一部分。",
    "我对探索新的性行为方式持开放态度。",
    "在关系中，性满足对我来说是必要的。",
    "我愿意与伴侣讨论性偏好和需求。",
    "我认为性幻想是健康的。",
    "我对不同的性取向持尊重态度。",
    "我能够轻松表达自己的性需求。",
    "我相信性教育对青少年很重要。",
    "我对色情内容持接受态度。",
    "我认为性不只是为了生育。",
    "我会主动寻求性知识。",
    "我对自己的性能力感到自信。",
    "我认为性可以增进伴侣间的亲密关系。",
    "我对婚前性行为没有道德上的反对。",
    "我能够享受性而不感到内疚。",
    "我对尝试不同的性爱姿势感兴趣。",
    "我认为性是表达爱的重要方式。",
    "我对性话题的讨论感到舒适。",
    "我重视性伴侣的性满足。",
    "我认为性是个人自由选择的领域。",
    "我相信性健康是整体健康的一部分。",
    "我对自己的身体感到舒适。",
    "我愿意接受专业的性咨询。",
    "我对不同文化的性观念持开放态度。",
    "我认为性是生活乐趣的来源之一。",
    "我会主动与伴侣保持性生活的新鲜感。",
    "我对性高潮的追求不感到羞耻。",
    "我认为性应该是双方自愿且愉悦的。",
    "我对性用品的使用持开放态度。",
    "我愿意在性方面尝试新的体验。",
    "我认为性在长期关系中仍然重要。",
    "我能够在性方面与伴侣沟通感受。",
    "我对自己的性吸引力有信心。",
    "我认为性教育应该从小学开始。",
    "我对性多样性持尊重态度。",
    "我愿意探索自己的性偏好。",
    "我认为性是建立亲密关系的基础之一。",
    "我对性话题的玩笑不感到尴尬。",
    "我重视性生活的质量而非频率。",
    "我认为每个人都有权利决定自己的性方式。",
    "我会关注自己的性健康。",
    "我对自己的性身份感到认同。",
    "我愿意与伴侣共同学习新的性知识。",
    "我对不同年龄段的性需求持理解态度。",
    "我认为性是身心健康的重要组成部分。",
    "我会主动表达对伴侣的性吸引力。",
    "我对性幻想的分享持开放态度。",
    "我认为性应该是自然且享受的过程。",
    "我对性工具的使用不感到羞耻。",
    "我愿意在性方面接受伴侣的建议。"
];

// 评分选项
const options = [
    { value: 1, text: "完全不同意" },
    { value: 2, text: "不太同意" },
    { value: 3, text: "中立" },
    { value: 4, text: "比较同意" },
    { value: 5, text: "完全同意" }
];

// 评分区间参考
const scoreRanges = [
    { min: 50, max: 90, type: "保守型", description: "性态度较为传统和保守" },
    { min: 91, max: 130, type: "谨慎型", description: "性态度相对谨慎和克制" },
    { min: 131, max: 170, type: "平衡型", description: "性态度平衡且健康" },
    { min: 171, max: 210, type: "开放型", description: "性态度开放且接受度高" },
    { min: 211, max: 250, type: "强度型", description: "性态度非常开放和强烈" }
];

// 评估详情
const assessmentDetails = {
    "保守型": {
        description: "您的性态度较为保守和传统。您可能对性话题持谨慎态度，更重视性的情感和承诺层面，而非身体体验本身。这可能反映了您的价值观、成长环境或文化背景的影响。",
        characteristics: [
            "对性话题的讨论可能感到不适或尴尬",
            "更重视长期关系中的情感连接而非性体验",
            "对传统的性观念和行为模式有较高认同",
            "可能对性的探索和创新持保留态度",
            "重视性与情感承诺的结合"
        ],
        suggestions: [
            "尝试以舒适的方式逐步开放自己，探索性话题和体验",
            "与伴侣建立安全的沟通环境，分享彼此的性需求和感受",
            "阅读健康的性教育材料，拓宽对性的理解",
            "认识到性是正常且健康的人类需求，不必过度压抑",
            "在尊重自己边界的前提下，考虑适度尝试新的性体验"
        ]
    },
    "谨慎型": {
        description: "您的性态度相对谨慎和克制。您对性有一定的接受度，但在实际行为和表达上较为保守。您可能重视性的情感基础，同时对性的探索持谨慎态度。",
        characteristics: [
            "对性话题有一定的开放度，但表达可能较为含蓄",
            "重视性关系中的情感连接和信任",
            "在性体验上可能更倾向于熟悉的模式",
            "对性的健康和安全有较高意识",
            "在尝试新的性体验前会仔细考虑"
        ],
        suggestions: [
            "尝试与伴侣更坦诚地交流性需求和偏好",
            "在舒适的范围内，逐步尝试新的性体验",
            "学习更多关于性健康和性满足的知识",
            "认识到适度的性探索可以增进伴侣关系",
            "培养对自己身体和性需求的正面认知"
        ]
    },
    "平衡型": {
        description: "您的性态度平衡且健康。您能够理性看待性，既重视性的情感层面，也认可性的生理需求。您在性表达和探索上持开放态度，同时也懂得尊重自己和伴侣的边界。",
        characteristics: [
            "能够自然地讨论性话题，不感到过度尴尬",
            "重视性关系中的情感连接和身体满足",
            "对性的探索持开放但理性的态度",
            "能够清晰表达自己的性需求和边界",
            "尊重伴侣的性偏好和选择"
        ],
        suggestions: [
            "继续保持与伴侣的性沟通，定期交流需求和感受",
            "保持对性知识的更新和学习",
            "创造性地保持性生活的新鲜感和活力",
            "关注伴侣的性满足，建立相互愉悦的性关系",
            "将性作为增强亲密关系的重要途径"
        ]
    },
    "开放型": {
        description: "您的性态度开放且接受度高。您对性持积极态度，愿意探索不同的性体验和表达方式。您能够自由表达自己的性需求，同时也尊重他人的性选择。",
        characteristics: [
            "对性话题的讨论感到轻松自然",
            "对不同的性取向和性行为方式持包容态度",
            "愿意尝试新的性体验和技巧",
            "能够清晰表达自己的性需求和偏好",
            "重视性健康和安全"
        ],
        suggestions: [
            "在探索新体验的同时，确保与伴侣的需求保持一致",
            "继续关注性健康和安全性行为",
            "注意平衡性在生活中的比重，避免过度强调",
            "尊重不同人的性观念和边界",
            "将性探索与情感连接相结合，促进关系的深度发展"
        ]
    },
    "强度型": {
        description: "您的性态度非常开放和强烈。性在您的生活中占据重要位置，您对性体验和探索有较高的热情和需求。您可能对传统的性观念和限制较少认同，更倾向于自由表达和探索。",
        characteristics: [
            "性在生活中扮演重要角色",
            "对性探索和创新有强烈兴趣",
            "对传统性观念的限制较少认同",
            "能够直接表达性需求和偏好",
            "对不同的性体验和方式持高度开放态度"
        ],
        suggestions: [
            "确保性探索在安全、自愿和道德的前提下进行",
            "注意平衡性与生活其他方面的关系",
            "尊重伴侣的需求和边界，避免将自己的期望强加于人",
            "关注性健康，定期进行健康检查",
            "认识到性只是亲密关系的一部分，情感连接同样重要"
        ]
    }
};

// 计算总分
function calculateScore(answers) {
    return answers.reduce((sum, answer) => {
        // 处理null值，将null视为0分
        if (answer === null || answer === undefined) {
            return sum + 0;
        }
        const num = parseInt(answer);
        // 确保是有效数字
        return sum + (isNaN(num) ? 0 : num);
    }, 0);
}

// 获取评估类型
function getAssessmentType(score) {
    for (const range of scoreRanges) {
        if (score >= range.min && score <= range.max) {
            return range.type;
        }
    }
    return "未知类型";
}

// 获取评估详情
function getAssessmentDetails(type) {
    return assessmentDetails[type] || {
        description: "无法确定您的评估类型。建议重新完成测试或咨询专业人士。",
        characteristics: ["无法提供具体特征"],
        suggestions: ["请咨询专业人士获取建议"]
    };
}